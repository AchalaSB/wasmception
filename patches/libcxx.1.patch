diff --git a//cmake/config-ix.cmake b//cmake/config-ix.cmake
--- a//cmake/config-ix.cmake	(revision 319848)
+++ b//cmake/config-ix.cmake	(working copy)
@@ -60,7 +60,7 @@
 endif ()
 
 if(NOT WIN32 OR MINGW)
-  include(CheckLibcxxAtomic)
+  #include(CheckLibcxxAtomic)
 endif()
 
 # Check compiler flags
Index: include/__config
===================================================================
diff --git a//include/__config b//include/__config
--- a//include/__config	(revision 319848)
+++ b//include/__config	(working copy)
@@ -45,6 +45,8 @@
 #define _LIBCPP_OBJECT_FORMAT_MACHO 1
 #elif defined(_WIN32)
 #define _LIBCPP_OBJECT_FORMAT_COFF  1
+#elif defined(__WASM32__)
+#define _LIBCPP_OBJECT_FORMAT_WASM32 1
 #else
 #error Unknown object file format
 #endif
